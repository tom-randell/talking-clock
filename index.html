<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Talking Clock</title>
</head>

<body>
    <h1>Talking clock</h1>
    <div id="page-grid">
        <p>The time is:</p>
        <h2 id="target"></h2>
    </div>

    <!--Scripts-->
    <script>let exports = {};</script>
    <script src="./conversion.js"></script>

    <script>
        function getHumanFriendlyTime() {
            const input = sanitizeInput(new Date());
            return makeTimeStringHumanFriendly(input);
        }

        function updateHtml(timeString) {
            const htmlTarget = document.getElementById('target');
            htmlTarget.innerText = timeString;
        }

        const canSpeak = 'speechSynthesis' in window;

        window.onload = () => {
            setInterval(() => {
                const result = getHumanFriendlyTime();
                updateHtml(result);
                if (canSpeak) {
                    const utterance = new SpeechSynthesisUtterance();
                    utterance.text = result;
                    window.speechSynthesis.speak(utterance);
                }
            }, 60000);
        };
    </script>
</body>

</html>